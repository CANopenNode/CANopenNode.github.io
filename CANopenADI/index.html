<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANopenADI: CANopenNode Analog Devices Inc.</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="CANopenNode.png"/></td>
  <td id="projectalign">
   <div id="projectname">CANopenADI
   </div>
   <div id="projectbrief">CANopenNode on Analog Devices Inc. MAX32xxx microcontrollers</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">CANopenNode Analog Devices Inc. </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="readmeCANopenADI"></a> CANopenADI is a CANopen stack running on Analog Devices Inc. MAX32662 and MAX32690 microcontroller based on <a href="https://github.com/CANopenNode/CANopenNode">CANOpenNode</a> stack.</p>
<h1><a class="anchor" id="autotoc_md0"></a>
How to run demos</h1>
<p>In order to run the demos, you will need:</p>
<ul>
<li>Analog Devices MSDK: If you have not installed it already, see this <a href="https://analog-devices-msdk.github.io/msdk/USERGUIDE/#installation">guide</a> for detailed instructions.</li>
<li>A DAPLink debug adapter for flashing and debugging: <a href="https://www.analog.com/en/design-center/evaluation-hardware-and-software/evaluation-boards-kits/max32625pico.html">MAX32625PICO</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md1"></a>
Cloning the project</h2>
<p>Clone the project from git repository and get submodules:</p>
<div class="fragment"><div class="line">git clone --recursive https://github.com/CANopenNode/CANopenADI</div>
<div class="line">cd CANopenADI</div>
</div><!-- fragment --><p>Update an existing project including submodules:</p>
<div class="fragment"><div class="line">cd CANopenADI</div>
<div class="line">git pull</div>
<div class="line">git submodule update --init --recursive</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md2"></a>
Importing projects</h2>
<p>You can import example projects into Eclipse MaximSDK.</p>
<ol type="1">
<li>Click <b>File -&gt; Import...</b></li>
<li>Select <b>General -&gt; Existing Projects into Workspace</b></li>
<li>Enter the CANopenADI repository path or click browse and navigate to CANopenADI then hit <b>Select Folder</b>.</li>
<li>Make sure <b>Search nested projects</b> is enabled otherwise the example projects will not be listed.</li>
<li>Example projects should now be visible inside the <b>Projects</b> box. Check the ones you wish to import then click <b>Finish</b>.</li>
<li>The projects should now be added to your workspace and visible in the <b>Project Explorer</b> tab.</li>
</ol>
<p>See also this <a href="https://analog-devices-msdk.github.io/msdk/USERGUIDE/#importing-examples">guide</a> for more information about setting up projects in Eclipse MaximSDK.</p>
<h2><a class="anchor" id="autotoc_md3"></a>
Building and running</h2>
<ol type="1">
<li>Select the example project in the <b>Launch Configuration</b> list.</li>
<li>Click the hammer icon on the left to build the project.</li>
<li>Select <b>Launch Mode</b>, which is either <b>Debug</b> or <b>Run</b>.</li>
<li>Use the <b>Debug</b>/**Run** button to upload the binary and launch the application.</li>
</ol>
<p>See also this <a href="https://analog-devices-msdk.github.io/msdk/USERGUIDE/#building-and-running-examples">guide</a> for more information about building and running.</p>
<p>Example projects mostly differ in their <b>Object Dictionary</b> configurations. Use <a href="https://github.com/CANopenNode/CANopenEditor">CANopenEditor</a> to configure the object dictionary profiles according to the needs of your project.</p>
<h1><a class="anchor" id="autotoc_md4"></a>
Repository directories</h1>
<ul>
<li><code>.\CANopenNode</code> : Includes the stack implemenation. In most scenarios, you do not need to edit these files as they are platform independent (i.e. ADI, Linux, PIC, STM32 and etc.).</li>
<li><code>.\MAX32xxx</code> : Includes the implementation of low-level driver for MAX32662 and MAX32690 microcontrollers.</li>
<li><code>.\examples_MAX32662</code> : Contains examples targeting MAX32662 boards.</li>
<li><code>.\examples_MAX32690</code> : Contains examples targeting MAX32690 boards.</li>
</ul>
<h1><a class="anchor" id="autotoc_md5"></a>
Supported boards and MCUs</h1>
<p><a href="https://www.analog.com/">MAX32690-EvKit</a></p>
<p>Evaluation kit for the MAX32690 microcontroller. A CAN transceiver is already available on the board. The data lines are exposed at JH8, labelled CAN0. You can connect CANH and CANL lines to an existing network or another board's CAN port.</p>
<p><a href="https://www.analog.com/">MAX32662-EvKit</a></p>
<p>Evaluation kit for the MAX32662 microcontroller. A CAN transceiver is already available on the board. The data lines are exposed at JH3, labelled CANB. You can connect CANH and CANL lines to an existing network or another board's CAN port.</p>
<h2><a class="anchor" id="autotoc_md6"></a>
Known limitations :</h2>
<p>There are only two hardware acceptance filters on MAX32662 and MAX32690 which is less than what CANopen usually requires. As a consequence every message on the bus has to be evaluated by the CPU before being discarded or passed to the upper layers for further processing.</p>
<p>The decision to use software filters is made in <code>CO_CANmodule_init</code>.</p>
<div class="fragment"><div class="line">CANmodule-&gt;useCANrxFilters = <span class="keyword">false</span>;</div>
</div><!-- fragment --><p> <code>CO_CANrxBufferInit</code> is invoked for each CANopen receive buffer to set the identifier and mask for acceptance filters.</p>
<div class="fragment"><div class="line"><span class="comment">/* CAN identifier and CAN mask, bit aligned with CAN module. Different on different microcontrollers. */</span></div>
<div class="line">buffer-&gt;ident = MXC_CAN_STANDARD_ID(ident);</div>
<div class="line"><span class="keywordflow">if</span>(rtr){</div>
<div class="line">    buffer-&gt;ident |= MXC_CAN_BUF_CFG_RTR(1);</div>
<div class="line">}</div>
<div class="line">buffer-&gt;mask = MXC_CAN_STANDARD_ID(mask) | MXC_CAN_BUF_CFG_RTR(1);</div>
</div><!-- fragment --><p>The received messages are then checked against previously set filters, in function <code>CO_CANRXinterrupt</code>.</p>
<div class="fragment"><div class="line"><span class="keywordflow">else</span>{</div>
<div class="line">    <span class="comment">/* CAN module filters are not used, message with any standard 11-bit identifier */</span></div>
<div class="line">    <span class="comment">/* has been received. Search rxArray from CANmodule for the same CAN-ID. */</span></div>
<div class="line">    buffer = &amp;CANmodule-&gt;rxArray[0];</div>
<div class="line">    <span class="keywordflow">for</span>(index = CANmodule-&gt;rxSize; index &gt; 0U; index--){</div>
<div class="line">        <span class="keywordflow">if</span>(((rcvMsgIdent ^ buffer-&gt;ident) &amp; buffer-&gt;mask) == 0U){</div>
<div class="line">            msgMatched = <span class="keyword">true</span>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        buffer++;</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md7"></a>
License</h1>
<p>This file is part of CANopenNode, an opensource CANopen Stack. Project home page is <a href="https://github.com/CANopenNode/CANopenNode">https://github.com/CANopenNode/CANopenNode</a>. For more information on CANopen see <a href="http://www.can-cia.org/">http://www.can-cia.org/</a>.</p>
<p>Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except in compliance with the License. You may obtain a copy of the License at</p>
<p><a href="http://www.apache.org/licenses/LICENSE-2.0">http://www.apache.org/licenses/LICENSE-2.0</a> </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
