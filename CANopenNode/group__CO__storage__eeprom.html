<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CANopenNode: Data storage in eeprom</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="CANopenNode.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CANopenNode
   </div>
   <div id="projectbrief">CANopen protocol stack</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#files">Files</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">Data storage in eeprom<div class="ingroups"><a class="el" href="group__CO__CANopen__storage.html">CANopen_storage</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p>Eeprom specific data storage functions.  
<a href="#details">More...</a></p>
<div id="dynsection-0" onclick="return toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="closed.png" alt="+"/> Collaboration diagram for Data storage in eeprom:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><iframe scrolling="no" frameborder="0" src="group__CO__storage__eeprom.svg" width="374" height="36"><p><b>This browser is not able to show SVG: try Firefox, Chrome, Safari, or Opera instead.</b></p></iframe>
</div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="files"></a>
Files</h2></td></tr>
<tr class="memitem:CO__eeprom_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CO__eeprom_8h.html">CO_eeprom.h</a></td></tr>
<tr class="memdesc:CO__eeprom_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">Eeprom interface for use with CO_storageEeprom. <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:CO__storageEeprom_8h"><td class="memItemLeft" align="right" valign="top">file &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="CO__storageEeprom_8h.html">CO_storageEeprom.h</a></td></tr>
<tr class="memdesc:CO__storageEeprom_8h"><td class="mdescLeft">&#160;</td><td class="mdescRight">CANopen data storage object for storing data into block device (eeprom) <br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga690dc6375985ba10f31acb30aff92bab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#ga690dc6375985ba10f31acb30aff92bab">CO_eeprom_init</a> (void *storageModule)</td></tr>
<tr class="memdesc:ga690dc6375985ba10f31acb30aff92bab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize eeprom device, target system specific function.  <a href="group__CO__storage__eeprom.html#ga690dc6375985ba10f31acb30aff92bab">More...</a><br /></td></tr>
<tr class="separator:ga690dc6375985ba10f31acb30aff92bab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac6224d7406f09181f44a8462708e121f"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#gac6224d7406f09181f44a8462708e121f">CO_eeprom_getAddr</a> (void *storageModule, <a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> isAuto, size_t len, <a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> *overflow)</td></tr>
<tr class="memdesc:gac6224d7406f09181f44a8462708e121f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get free address inside eeprom, target system specific function.  <a href="group__CO__storage__eeprom.html#gac6224d7406f09181f44a8462708e121f">More...</a><br /></td></tr>
<tr class="separator:gac6224d7406f09181f44a8462708e121f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga3e38d8b0b8c233b97bb713d3f8ec75b3"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#ga3e38d8b0b8c233b97bb713d3f8ec75b3">CO_eeprom_readBlock</a> (void *storageModule, <a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *data, size_t eepromAddr, size_t len)</td></tr>
<tr class="memdesc:ga3e38d8b0b8c233b97bb713d3f8ec75b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read block of data from the eeprom, target system specific function.  <a href="group__CO__storage__eeprom.html#ga3e38d8b0b8c233b97bb713d3f8ec75b3">More...</a><br /></td></tr>
<tr class="separator:ga3e38d8b0b8c233b97bb713d3f8ec75b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4b8afa21fe1a629732d0b8129f663e87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#ga4b8afa21fe1a629732d0b8129f663e87">CO_eeprom_writeBlock</a> (void *storageModule, <a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *data, size_t eepromAddr, size_t len)</td></tr>
<tr class="memdesc:ga4b8afa21fe1a629732d0b8129f663e87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Write block of data to the eeprom, target system specific function.  <a href="group__CO__storage__eeprom.html#ga4b8afa21fe1a629732d0b8129f663e87">More...</a><br /></td></tr>
<tr class="separator:ga4b8afa21fe1a629732d0b8129f663e87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga27485f28ffd89043226fcc07e82f05d4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__dataTypes.html#ga1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#ga27485f28ffd89043226fcc07e82f05d4">CO_eeprom_getCrcBlock</a> (void *storageModule, size_t eepromAddr, size_t len)</td></tr>
<tr class="memdesc:ga27485f28ffd89043226fcc07e82f05d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get CRC checksum of the block of data stored in the eeprom, target system specific function.  <a href="group__CO__storage__eeprom.html#ga27485f28ffd89043226fcc07e82f05d4">More...</a><br /></td></tr>
<tr class="separator:ga27485f28ffd89043226fcc07e82f05d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gabde5342665bcdb69b750a0922db46155"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#gabde5342665bcdb69b750a0922db46155">CO_eeprom_updateByte</a> (void *storageModule, <a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> data, size_t eepromAddr)</td></tr>
<tr class="memdesc:gabde5342665bcdb69b750a0922db46155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Update one byte of data in the eeprom, target system specific function.  <a href="group__CO__storage__eeprom.html#gabde5342665bcdb69b750a0922db46155">More...</a><br /></td></tr>
<tr class="separator:gabde5342665bcdb69b750a0922db46155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaa025e0372bf52c2708389dd7b8f46c87"><td class="memItemLeft" align="right" valign="top"><a class="el" href="group__CO__driver.html#ga1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#gaa025e0372bf52c2708389dd7b8f46c87">CO_storageEeprom_init</a> (<a class="el" href="structCO__storage__t.html">CO_storage_t</a> *storage, <a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *CANmodule, void *storageModule, <a class="el" href="structOD__entry__t.html">OD_entry_t</a> *OD_1010_StoreParameters, <a class="el" href="structOD__entry__t.html">OD_entry_t</a> *OD_1011_RestoreDefaultParam, <a class="el" href="structCO__storage__entry__t.html">CO_storage_entry_t</a> *entries, <a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> entriesCount, <a class="el" href="group__CO__dataTypes.html#ga33594304e786b158f3fb30289278f5af">uint32_t</a> *storageInitError)</td></tr>
<tr class="memdesc:gaa025e0372bf52c2708389dd7b8f46c87"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize data storage object (block device (eeprom) specific)  <a href="group__CO__storage__eeprom.html#gaa025e0372bf52c2708389dd7b8f46c87">More...</a><br /></td></tr>
<tr class="separator:gaa025e0372bf52c2708389dd7b8f46c87"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72f28ccbed7081831c9867688d23f9c4"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__CO__storage__eeprom.html#ga72f28ccbed7081831c9867688d23f9c4">CO_storageEeprom_auto_process</a> (<a class="el" href="structCO__storage__t.html">CO_storage_t</a> *storage, <a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> saveAll)</td></tr>
<tr class="memdesc:ga72f28ccbed7081831c9867688d23f9c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Automatically update data if differs inside eeprom.  <a href="group__CO__storage__eeprom.html#ga72f28ccbed7081831c9867688d23f9c4">More...</a><br /></td></tr>
<tr class="separator:ga72f28ccbed7081831c9867688d23f9c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Eeprom specific data storage functions. </p>
<p>This is an interface into generic CANopenNode <a class="el" href="group__CO__storage.html">Data storage base</a> for usage with eeprom chip like 25LC256. Functions <a class="el" href="group__CO__storage__eeprom.html#gaa025e0372bf52c2708389dd7b8f46c87">CO_storageEeprom_init()</a> and <a class="el" href="group__CO__storage__eeprom.html#ga72f28ccbed7081831c9867688d23f9c4">CO_storageEeprom_auto_process</a> are target system independent. Functions specified by <a class="el" href="CO__eeprom_8h.html">CO_eeprom.h</a> file, must be defined by target system. For example implementation see CANopenPIC/PIC32.</p>
<p>Storage principle: This function first reads 'signatures' for all entries from the known address from the eeprom. If signature for each entry is correct, then data is read from correct address from the eeprom into storage location. If signature is wrong, then data for that entry is indicated as corrupt and CANopen emergency message is sent.</p>
<p>Signature also includes 16-bit CRC checksum of the data stored in eeprom. If it differs from CRC checksum calculated from the data actually loaded (on program startup), then entry is indicated as corrupt and CANopen emergency message is sent.</p>
<p>Signature is written to eeprom, when data block is stored via CANopen SDO write command to object 0x1010. Signature is erased, with CANopen SDO write command to object 0x1011. If signature is not valid or is erased for any entry, emergency message is sent. If eeprom is new, then all signatures are wrong, so it is best to store all parameters by writing to 0x1010, sub 1.</p>
<p>If entry attribute has CO_storage_auto set, then data block is stored autonomously, byte by byte, on change, during program run. Those data blocks are stored into write unprotected location. For auto storage to work, its signature in eeprom must be correct. CRC checksum for the data is not used. </p>
<h2 class="groupheader">Function Documentation</h2>
<a id="ga690dc6375985ba10f31acb30aff92bab"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga690dc6375985ba10f31acb30aff92bab">&#9670;&nbsp;</a></span>CO_eeprom_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> CO_eeprom_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize eeprom device, target system specific function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storageModule</td><td>Pointer to storage module.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>True on success </dd></dl>

</div>
</div>
<a id="gac6224d7406f09181f44a8462708e121f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac6224d7406f09181f44a8462708e121f">&#9670;&nbsp;</a></span>CO_eeprom_getAddr()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">size_t CO_eeprom_getAddr </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a>&#160;</td>
          <td class="paramname"><em>isAuto</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> *&#160;</td>
          <td class="paramname"><em>overflow</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get free address inside eeprom, target system specific function. </p>
<p>Function is called several times for each storage block in the initialization phase after <a class="el" href="group__CO__storage__eeprom.html#ga690dc6375985ba10f31acb30aff92bab" title="Initialize eeprom device, target system specific function.">CO_eeprom_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">storageModule</td><td>Pointer to storage module. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">isAuto</td><td>True, if variable is auto stored or false if protected </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">len</td><td>Length of data, which will be stored to that location </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">overflow</td><td>set to true, if not enough eeprom memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Asigned eeprom address </dd></dl>

</div>
</div>
<a id="ga3e38d8b0b8c233b97bb713d3f8ec75b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga3e38d8b0b8c233b97bb713d3f8ec75b3">&#9670;&nbsp;</a></span>CO_eeprom_readBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CO_eeprom_readBlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>eepromAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read block of data from the eeprom, target system specific function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storageModule</td><td>Pointer to storage module. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data buffer, where data will be stored. </td></tr>
    <tr><td class="paramname">eepromAddr</td><td>Address in eeprom, from where data will be read. </td></tr>
    <tr><td class="paramname">len</td><td>Length of the data block to be read. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ga4b8afa21fe1a629732d0b8129f663e87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga4b8afa21fe1a629732d0b8129f663e87">&#9670;&nbsp;</a></span>CO_eeprom_writeBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> CO_eeprom_writeBlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a> *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>eepromAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Write block of data to the eeprom, target system specific function. </p>
<p>It is blocking function, so it waits, until all data is written.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storageModule</td><td>Pointer to storage module. </td></tr>
    <tr><td class="paramname">data</td><td>Pointer to data buffer which will be written. </td></tr>
    <tr><td class="paramname">eepromAddr</td><td>Address in eeprom, where data will be written. If data is stored accross multiple pages, address must be aligned with page. </td></tr>
    <tr><td class="paramname">len</td><td>Length of the data block.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true on success </dd></dl>

</div>
</div>
<a id="ga27485f28ffd89043226fcc07e82f05d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga27485f28ffd89043226fcc07e82f05d4">&#9670;&nbsp;</a></span>CO_eeprom_getCrcBlock()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__dataTypes.html#ga1f1825b69244eb3ad2c7165ddc99c956">uint16_t</a> CO_eeprom_getCrcBlock </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>eepromAddr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get CRC checksum of the block of data stored in the eeprom, target system specific function. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storageModule</td><td>Pointer to storage module. </td></tr>
    <tr><td class="paramname">eepromAddr</td><td>Address of data in eeprom. </td></tr>
    <tr><td class="paramname">len</td><td>Length of the data.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CRC checksum </dd></dl>

</div>
</div>
<a id="gabde5342665bcdb69b750a0922db46155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gabde5342665bcdb69b750a0922db46155">&#9670;&nbsp;</a></span>CO_eeprom_updateByte()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a> CO_eeprom_updateByte </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>eepromAddr</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Update one byte of data in the eeprom, target system specific function. </p>
<p>Function is used by automatic storage. It updates byte in eeprom only if differs from data.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storageModule</td><td>Pointer to storage module. </td></tr>
    <tr><td class="paramname">data</td><td>Data byte to be written </td></tr>
    <tr><td class="paramname">eepromAddr</td><td>Address in eeprom, from where data will be updated.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if write was successful or false, if still waiting previous data to finish writing. </dd></dl>

</div>
</div>
<a id="gaa025e0372bf52c2708389dd7b8f46c87"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaa025e0372bf52c2708389dd7b8f46c87">&#9670;&nbsp;</a></span>CO_storageEeprom_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="group__CO__driver.html#ga1cb2d3466eb0c6d267f3b5ff1a0d9532">CO_ReturnError_t</a> CO_storageEeprom_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__storage__t.html">CO_storage_t</a> *&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__CANmodule__t.html">CO_CANmodule_t</a> *&#160;</td>
          <td class="paramname"><em>CANmodule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>storageModule</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOD__entry__t.html">OD_entry_t</a> *&#160;</td>
          <td class="paramname"><em>OD_1010_StoreParameters</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structOD__entry__t.html">OD_entry_t</a> *&#160;</td>
          <td class="paramname"><em>OD_1011_RestoreDefaultParam</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structCO__storage__entry__t.html">CO_storage_entry_t</a> *&#160;</td>
          <td class="paramname"><em>entries</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#gaba7bc1797add20fe3efdf37ced1182c5">uint8_t</a>&#160;</td>
          <td class="paramname"><em>entriesCount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#ga33594304e786b158f3fb30289278f5af">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>storageInitError</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize data storage object (block device (eeprom) specific) </p>
<p>This function should be called by application after the program startup, before <a class="el" href="group__CO__CANopen.html#gac7184266b6880ae68dcb5e96b3c3f089">CO_CANopenInit()</a>. This function initializes storage object, OD extensions on objects 1010 and 1011, reads data from file, verifies them and writes data to addresses specified inside entries. This function internally calls <a class="el" href="group__CO__storage.html#ga696ea7f2200da7eb611c8e0a21f3cba6">CO_storage_init()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">storage</td><td>This object will be initialized. It must be defined by application and must exist permanently. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">CANmodule</td><td>CAN device, used for <a class="el" href="group__CO__critical__sections.html#gae91e416633b4df1800e97a2bc02bbeb4">CO_LOCK_OD()</a> macro. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">storageModule</td><td>Pointer to storage module passed to CO_eeprom functions. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">OD_1010_StoreParameters</td><td>OD entry for 0x1010 -"Store parameters". Entry is optional, may be NULL. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">OD_1011_RestoreDefaultParam</td><td>OD entry for 0x1011 -"Restore default
parameters". Entry is optional, may be NULL. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">entries</td><td>Pointer to array of storage entries, see <a class="el" href="group__CO__storage.html#ga696ea7f2200da7eb611c8e0a21f3cba6">CO_storage_init</a>. </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">entriesCount</td><td>Count of storage entries </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">storageInitError</td><td>If function returns CO_ERROR_DATA_CORRUPT, then this variable contains a bit mask from subIndexOD values, where data was not properly initialized. If other error, then this variable contains index or erroneous entry. If there is hardware error like missing eeprom, then storageInitError is 0xFFFFFFFF and function returns CO_ERROR_DATA_CORRUPT.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>CO_ERROR_NO, CO_ERROR_DATA_CORRUPT if data can not be initialized, CO_ERROR_ILLEGAL_ARGUMENT or CO_ERROR_OUT_OF_MEMORY. </dd></dl>

</div>
</div>
<a id="ga72f28ccbed7081831c9867688d23f9c4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga72f28ccbed7081831c9867688d23f9c4">&#9670;&nbsp;</a></span>CO_storageEeprom_auto_process()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void CO_storageEeprom_auto_process </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structCO__storage__t.html">CO_storage_t</a> *&#160;</td>
          <td class="paramname"><em>storage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="group__CO__dataTypes.html#ga490ee355f57f2815cb1aa4626cf525f7">bool_t</a>&#160;</td>
          <td class="paramname"><em>saveAll</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Automatically update data if differs inside eeprom. </p>
<p>Should be called cyclically by program. Each interval it updates one byte.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">storage</td><td>This object </td></tr>
    <tr><td class="paramname">saveAll</td><td>If true, all bytes are updated, useful on program end. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
